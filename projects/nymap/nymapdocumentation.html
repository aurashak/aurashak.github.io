<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>About</title>
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
    <link rel="stylesheet" href="https://aurashak.github.io/main.css">

</head>
<body>

<div class="header">

</div>
    




<div class="aboutcontainer">

    <div class="maptitle">NY Environmental Infrastructure Map Documentation</div>

<br>
<div style="display: flex; align-items: center; justify-content: center; margin: auto;">
        <img src="https://aurashak.github.io/images/leafletlogo.png" style="height: 40px;" title="Leaflet" alt="Leaflet">&nbsp;&nbsp;
            <img src="https://aurashak.github.io/images/qgislogo.png" style="height: 40px;" title="QGIS" alt="QGIS">&nbsp;&nbsp;
       <img src="https://aurashak.github.io/images/github.png" style="height: 40px;" title="GitHub" alt="GitHub">&nbsp;&nbsp;
        <img src="https://aurashak.github.io/images/esalogo.png" style="height: 40px;" title="ESA" alt="ESA">&nbsp;&nbsp;
       <img src="https://aurashak.github.io/images/osmlogo.png" style="height: 40px;" title="OpenStreetMap" alt="OpenStreetMap">&nbsp;&nbsp;
        <img src="https://aurashak.github.io/images/geojsonlogo.png" style="height: 40px;" title="GeoJSON" alt="GeoJSON">&nbsp;&nbsp;
        <img src="https://aurashak.github.io/images/jslogo.png" style="height: 40px;" title="JavaScript" alt="JavaScript">&nbsp;&nbsp;
 <br>       <a href="https://aurashak.github.io/projects/nymap/nymap.html">&larr; Back to map</a> 

    </div>

<br>
<div class="textbox">

<h3 style="display: inline;  "><b>1. Applications</b></h3><br>
This interactive webmap uses <a href="https://leafletjs.com">Leaflet</a>, JavaScript, and GeoJson files.</h3>
</div>

<Br>

<div class="textbox">

<h3 style="display: inline;  "><b>2. Download Geojson files</b></h3>
    <ul>
        <li>From <a hrerf="https://data.gis.ny.gov">https://data.gis.ny.gov</a>, download New York State waste water treatment plants, combined sewere overflow locations, inactive landfills, recycling facilities, power plants, waste transfer stations, energy transmission lines, and oil storage locations.</li>   
        <li>From <a href="https://opendata.cityofnewyork.us">https://opendata.cityofnewyork.us</a>, download NYC hurricane evacuation zones and NYC projected floodplains.</li>   
        <li>From <a href="https://hifld-geoplatform.opendata.arcgis.com/datasets/geoplatform::natural-gas-pipelines/explore"> Homeland Infrastructure Foundation-Level Data (HIFLD)</a>, download natural gas pipelines.</li>
        <li>From <a href="https://www.census.gov/geographies/mapping-files/time-series/geo/tiger-data.html">US Census Bureau</a>, download data for per capita income and average cost of housing.</li></h3>
    </ul>
</div>
<Br>

    <div class="textbox">

<h3 style="display: inline; text-decoration: underline; "><b>3. Set up Leaflet map</b></h3>
<h3>Create a Github pages account and set up a repository to display you Leaflet map.
<Br>
Create a javacript file and enter the following information. This code places the Leaflete map on the website and sets the initial location as New York City</h3>


<pre>  <code style="font-size: 14px; background-color: #3e3e3e; color: #fff; padding: 10px; border-radius: 5px; display: block; overflow: auto; max-width: 100%;">
    var map = L.map('nymap', {            
}).setView([40.7128, -74.0060]); 
</code></pre>
</div>

<br>

<div class="textbox">

<h3 style="display: inline; text-decoration: underline; "><b>4. Add Open Street Maps as the base layer</b></h3>
<h3> This code adds Open Street Maps as the layer beneath the geojson layers that will be added later</h3>

<pre>  <code style="font-size: 14px; background-color: #3e3e3e; color: #fff; padding: 10px; border-radius: 5px; display: block; overflow: auto; max-width: 100%;">
var map = L.map('map-container').setView([0, 0], 2);

var openstreetmapLayer = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    // No style options here for custom styling
});

openstreetmapLayer.addTo(map);
</code></pre>
</div>

<br>

<div class="textbox">


<h3 style="display: inline; text-decoration: underline; "><b>5. Add geojson layers to appear over the OSM layer</b></h3>
<h3> This geojson data is for the location of the Air Quality Monitoring Sites. Repeat this proces for other geojson layers of data. Convert circle markers to lines and polygons for other their respective data types.</h3>

<pre>  <code style="font-size: 14px; background-color: #3e3e3e; color: #fff; padding: 10px; border-radius: 5px; display: block; overflow: auto; max-width: 100%;">
    // AQI sites
var aqisiteLayer = L.geoJSON.ajax('https://aurashak.github.io/geojson/nyc/aqisite.geojson', {
pointToLayer: function (feature, latlng) {
var size = calculateMarkerSize(map.getZoom());
return L.circleMarker(latlng, {
    radius: size,
    fillColor: 'green',
    color: 'black',
    weight: 0,
    opacity: 0.0,
    fillOpacity: 0.5
});
}
});
</code></pre>
</div>

<br>

<div class="textbox">


<h3 style="display: inline; text-decoration: underline; "><b>6. Create layer groups</b></h3>
<h3>Create layer groups for how you want the content to be structured. This example is for the Energy layer group.</h3>
<pre>  <code style="font-size: 14px; background-color: #3e3e3e; color: #fff; padding: 10px; border-radius: 5px; display: block; overflow: auto; max-width: 100%;">
    // Energy Layer Group
var energyLayerGroup = L.layerGroup();


// Major Oil Storage Layer
var majoroilstorageLayer = L.geoJSON.ajax('https://aurashak.github.io/geojson/nyc/majoroilstorage.geojson', {
    pointToLayer: function (feature, latlng) {
        var size = calculateMarkerSize(map.getZoom());
        return L.circleMarker(latlng, {
            radius: size,
            fillColor: 'black',
            color: 'black',
            weight: 0,
            opacity: 0.7,
            fillOpacity: 0.5
        });
    }
}).addTo(energyLayerGroup);
</code></pre>
</div>

<br>


<div class="textbox">

<h3 style="display: inline; text-decoration: underline; "><b>7. Add event listeners for each layer</b></h3>
<h3>Event listeners are necessary to toggle the layers on and off when the switches are pushed.</h3>
<pre>  <code style="font-size: 14px; background-color: #3e3e3e; color: #fff; padding: 10px; border-radius: 5px; display: block; overflow: auto; max-width: 100%;">
    document.getElementById('nycso').addEventListener('change', function() {
    if (map.hasLayer(nycsoLayer)) {
        // If the layer is already on, do nothing when switching left to right
        if (document.getElementById('nycso').checked) {
            return;
        }
        map.removeLayer(nycsoLayer);
    } else {
        map.addLayer(nycsoLayer);
    }
});
</code></pre>
</div>

<br>

<div class="textbox">


<h3 style="display: inline; text-decoration: underline; "><b>8. Create event listeners for each layer group</b></h3>
<h3>Event listeners for each layer group will show or remove all layers in  a group when the group switch is toggled on or off.</h3>

<pre>  <code style="font-size: 14px; background-color: #3e3e3e; color: #fff; padding: 10px; border-radius: 5px; display: block; overflow: auto; max-width: 100%;">
    document.getElementById('energyLayerGroup').addEventListener('click', function() {
if (map.hasLayer(energyLayerGroup)) {
    map.removeLayer(energyLayerGroup);
    // If the group toggle is turned off, turn off individual layers as well
    map.removeLayer(majoroilstorageLayer);
    map.removeLayer(powerplantsLayer);
    map.removeLayer(nygaspipelinesLayer);
    map.removeLayer(electrictransmissionlinesLayer);

    // Reset the individual layer toggle buttons to off state
    document.getElementById('majoroilstorage').checked = false;
    document.getElementById('powerplants').checked = false;
    document.getElementById('nygaspipelines').checked = false;
    document.getElementById('electrictransmissionlines').checked = false;

} else {
    map.addLayer(energyLayerGroup);
    // If the group toggle is turned on, turn on individual layers if they were previously checked
    if (document.getElementById('majoroilstorage').checked) {
        map.addLayer(majoroilstorageLayer);
    }
    if (document.getElementById('powerplants').checked) {
        map.addLayer(powerplantsLayer);
    }
    if (document.getElementById('nygaspipelines').checked) {
        map.addLayer(nygaspipelinesLayer);
    }
    if (document.getElementById('electrictransmissionlines').checked) {
        map.addLayer(electrictransmissionlinesLayer);
    }
}
});
</code></pre>
</div>

<br>


<div class="textbox">

<h3 style="display: inline; text-decoration: underline; "><b>9. Add the map legend function</b></h3>
<h3>In order for the symbology for each layer to show in the map legend (the symbol beside each layer on the map website), add these functions.</h3>

<pre>  <code style="font-size: 14px; background-color: #3e3e3e; color: #fff; padding: 10px; border-radius: 5px; display: block; overflow: auto; max-width: 100%;">
    // Set the legend symbol shapes and colors for each layer
setLegendSymbol('evacuationzones', 'red', 'polygon');
setLegendSymbol('electrictransmissionlines', 'orange', 'line');
setLegendSymbol('aqisite', 'green', 'circle');
setLegendSymbol('chemicalstorage', 'blue', 'circle');
setLegendSymbol('recyclingfacility', 'orange', 'circle');
setLegendSymbol('nycso', 'brown', 'circle');
setLegendSymbol('nygaspipelines', 'purple', 'line');
setLegendSymbol('powerplants', '#FFC0CB', 'circle');
setLegendSymbol('wastewatertreatment', 'red', 'circle');
setLegendSymbol('wastetransferfacility', 'purple', 'circle');
setLegendSymbol('majoroilstorage', 'black', 'circle');
setLegendSymbol('inactivesolidwastelandfill', 'grey', 'circle');
setLegendSymbol('floodplain', '#ADD8E6', 'polygon');

// Function to set legend symbols
function setLegendSymbol(layerId, color, shape) {
const legendSymbol = document.getElementById(`legend-${layerId}`);

if (legendSymbol) {
if (shape === 'circle') {
    // Create a circle SVG element with a slightly smaller size
    legendSymbol.innerHTML = `<svg width="25" height="25"><circle cx="12.5" cy="12.5" r="10" fill="${color}" /></svg>`;
} else if (shape === 'line') {
    // Create a line SVG element with a slightly smaller size
    legendSymbol.innerHTML = `<svg width="25" height="25"><line x1="2.5" y1="12.5" x2="22.5" y2="12.5" stroke="${color}" stroke-width="5" /></svg>`;
} else if (shape === 'polygon') {
    // Create a polygon SVG element (example polygon with 5 points) with a slightly smaller size
    legendSymbol.innerHTML = `<svg width="25" height="25"><polygon points="2.5,2.5 2.5,22.5 22.5,22.5 22.5,2.5" fill="${color}" /></svg>`;
}
}    
}
</code></pre>
</div>

<br>

<div class="textbox">

<h3 style="display: inline; text-decoration: underline; "><b>10. Next steps</b></h3>
<h3>Additional layers of data are in the process of being added to this map. Those layers include real-time air quality data derived from the Googel Maps air quality API, surface temperature data derived from NASA Landsat sources, and land cover data. A submission form will also be added so viewers can add metadat, such as text, audio, and images describing sites shown on the map.</h3>
</div>

</div>
<Br><br>
                                    
<script src="https://aurashak.github.io/navigation.js"></script>

</body>
</html>
  
          






















        